## API Report File for "@formidable-webview/webshell"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import type { ComponentPropsWithoutRef } from 'react';
import type { ComponentType } from 'react';
import type { ElementRef } from 'react';
import type { ForwardRefExoticComponent } from 'react';
import * as React_2 from 'react';
import type { Ref } from 'react';
import type { RefAttributes } from 'react';

// @public
export interface AutoheightParams<S extends WebshellProps<MinimalWebViewProps, Feature<any, any>[]>> {
    initialHeight?: number;
    resetHeightOnViewportWidthChange?: boolean;
    webshellProps: S;
    width?: number;
}

// @public
export interface AutoheightState<S extends WebshellProps<MinimalWebViewProps, [ExtractFeatureFromClass<typeof HandleHTMLDimensionsFeature>]>> {
    autoheightWebshellProps: Pick<S, 'webshellDebug' | 'onDOMHTMLDimensions' | 'style' | 'scalesPageToFit' | 'showsVerticalScrollIndicator' | 'disableScrollViewPanResponder' | 'contentMode'> & Partial<S>;
    contentSize: Partial<DOMRectSize>;
    resizeImplementation: HTMLDimensionsImplementation | null;
    syncState: AutoheightSyncState;
}

// @public
export type AutoheightSyncState = 'init' | 'syncing' | 'synced';

// @public
export interface CSSBoxDimensionsComputedStyle {
    // (undocumented)
    borderBottomWidth: number;
    // (undocumented)
    borderLeftWidth: number;
    // (undocumented)
    borderRightWidth: number;
    // (undocumented)
    borderTopWidth: number;
    // (undocumented)
    marginBottom: number;
    // (undocumented)
    marginLeft: number;
    // (undocumented)
    marginRight: number;
    // (undocumented)
    marginTop: number;
    // (undocumented)
    paddingBottom: number;
    // (undocumented)
    paddingLeft: number;
    // (undocumented)
    paddingRight: number;
    // (undocumented)
    paddingTop: number;
}

// @public
export interface DataAttributes {
    // (undocumented)
    [key: string]: string;
}

// @public
export type DOMCollectionRequest = DOMElementQueryRequest | DOMElementClassNameRequest | DOMElementTagNameRequest | string;

// @public
export type DOMElementClassNameRequest = {
    className: string;
};

// @public
export type DOMElementIdRequest = {
    id: string;
};

// @public
export type DOMElementQueryRequest = {
    query: string;
};

// @public
export type DOMElementRequest = DOMElementQueryRequest | DOMElementClassNameRequest | DOMElementIdRequest | DOMElementTagNameRequest | string;

// @public
export type DOMElementTagNameRequest = {
    tagName: string;
};

// @public
export interface DOMRect extends DOMRectSize {
    // (undocumented)
    bottom: number;
    // (undocumented)
    left: number;
    // (undocumented)
    right: number;
    // (undocumented)
    top: number;
}

// @public (undocumented)
export interface DOMRectSize {
    // (undocumented)
    height: number;
    // (undocumented)
    width: number;
}

// @public
export interface DOMUtils {
    getDOMSelection(selector: DOMElementRequest): HTMLElement | null;
    getDOMSelectionAll(selector: DOMElementQueryRequest | string): any;
    getDOMSelectionAll(selector: DOMElementClassNameRequest | DOMElementTagNameRequest): any;
    // (undocumented)
    numericFromPxString(style: string): number;
}

// @public
export interface ElementCSSBoxDimensions {
    borderBox: DOMRectSize;
    computedStyle: CSSBoxDimensionsComputedStyle;
    horizontalScrollbarWidth: number;
    scrollBox: DOMRectSize;
    verticalScrollbarWidth: number;
}

// @public
export type ExtractFeatureFromClass<F> = F extends FeatureClass<infer O, infer S, infer W> ? Feature<O, S, W> : never;

// @public
export type ExtractPropsFromFeature<F> = F extends Feature<any, infer P, any> ? ExtractPropsFromSpecs<P> : {};

// @public
export type ExtractPropsFromSpecs<S> = S extends PropsSpecs<infer N, any> ? S[N] extends never ? {} : Required<S[N]>['signature'] : never;

// @public
export type ExtractWebHandlerSpecFromDef<W> = W extends WebHandlerDefinition<infer I, infer P> ? {
    [k in I]: WebHandlerDefinition<I, P>;
} : never;

// @public
export type ExtractWebHandlerSpecsFromFeature<F> = F extends Feature<any, any, infer P> ? P : never;

// @public
export type ExtractWebshellFromFeatClass<C extends ComponentType<any>, F extends FeatureClass<any, any, any>[]> = WebshellComponent<C, ExtractFeatureFromClass<F[number]>[]>;

// @public
export abstract class Feature<O extends {} = {}, P extends PropsSpecs<any, any> = {}, W extends WebHandlersSpecs<any> = {}> implements FeatureDefinition<O> {
    protected constructor(params: FeatureDefinition<O> & {
        propSpecs: P;
        webSpecs: W;
    }, options: O);
    readonly defaultOptions: Required<O>;
    // @internal (undocumented)
    hasWebHandler(eventId: string): boolean;
    readonly identifier: string;
    readonly options: O;
    readonly propSpecs: P;
    readonly script: string;
    readonly webSpecs: W;
}

// @public
export class FeatureBuilder<O extends {} = {}, S extends PropsSpecs<any, any> = {}, W extends WebHandlersSpecs<any> = {}> {
    constructor(config: FeatureBuilderConfig<O>);
    build(): FeatureClass<O, S, W>;
    withShellHandler<N extends string, P>(propName: N, eventId?: string): FeatureBuilder<O, S & PropsSpecs<N, (p: P) => void>, W>;
    withWebHandler<I extends string = string, P = undefined>(eventId: I): FeatureBuilder<O, S, W & { [k in I]: WebHandlerDefinition<I, P>; }>;
}

// @public
export interface FeatureBuilderConfig<O extends {}> extends FeatureDefinition<O> {
    // @internal (undocumented)
    __propSpecs?: PropsSpecs<any, any>;
    // @internal (undocumented)
    __webSpecs?: WebHandlersSpecs<any>;
}

// @public
export interface FeatureClass<O extends {} = {}, P extends PropsSpecs<any, any> = {}, W extends WebHandlersSpecs<any> = {}> {
    // (undocumented)
    new (...args: O extends Partial<O> ? [] | [O] : [O]): Feature<O, P, W>;
    // (undocumented)
    identifier: string;
    // (undocumented)
    name: string;
}

// @public
export type FeatureDefinition<O extends {}> = {
    readonly script: string;
    readonly identifier: string;
    readonly defaultOptions: Required<O>;
};

// @public
export const ForceElementSizeFeature: FeatureClass<ForceElementSizeOptions>;

// @public
export interface ForceElementSizeOptions {
    forceHeight?: boolean;
    forceWidth?: boolean;
    heightValue?: number | string;
    shouldThrowWhenNotFound?: boolean;
    target?: DOMElementRequest;
    widthValue?: number | string;
}

// @public
export const ForceResponsiveViewportFeature: FeatureClass<ForceResponsiveViewportOptions>;

// @public
export interface ForceResponsiveViewportOptions {
    initScale?: number;
    maxScale?: number;
    minScale?: number;
}

// @public
export interface HandleElementCSSBoxDimensionsOptions {
    shouldThrowWhenNotFound?: boolean;
    target: DOMElementRequest;
}

// @public
export const HandleElementCSSBoxFeature: FeatureClass<HandleElementCSSBoxDimensionsOptions, {
    onDOMElementCSSBoxDimensions: PropDefinition<'onDOMElementCSSBoxDimensions', (e: ElementCSSBoxDimensions) => void>;
}>;

// @public
export const HandleHashChangeFeature: FeatureClass<HandleHashChangeOptions, {
    onDOMHashChange: PropDefinition<'onDOMHashChange', (e: HashChangeEvent) => void>;
}>;

// @public
export interface HandleHashChangeOptions {
    shouldResetHashOnEvent?: boolean;
}

// @public
export const HandleHTMLDimensionsFeature: FeatureClass<HandleHTMLDimensionsOptions, {
    onDOMHTMLDimensions: PropDefinition<'onDOMHTMLDimensions', (d: HTMLDimensions) => void>;
}>;

// @public
export interface HandleHTMLDimensionsOptions {
    deltaMin?: number;
    forceImplementation?: HTMLDimensionsImplementation | false;
    listenToWindowResizeEvent?: boolean;
    pollingInterval?: number;
}

// @public
export const HandleLinkPressFeature: FeatureClass<LinkPressOptions, {
    onDOMLinkPress: PropDefinition<'onDOMLinkPress', (t: LinkPressTarget) => void>;
}>;

// @public
export const HandleVisualViewportFeature: FeatureClass<{}, {
    onDOMVisualViewport: PropDefinition<'onDOMVisualViewport', (d: VisualViewportDimensions) => void>;
}>;

// @public
export interface HashChangeEvent {
    hash: string;
    targetElementBoundingRect: DOMRect;
}

// @public
export interface HTMLDimensions {
    content: DOMRectSize;
    implementation: HTMLDimensionsImplementation;
    layoutViewport: DOMRectSize;
}

// @public
export type HTMLDimensionsImplementation = 'resize' | 'mutation' | 'polling';

// @public
export const InjectStyleFeature: FeatureClass<InjectStyleFeatureOptions>;

// @public
export interface InjectStyleFeatureOptions {
    css: string;
}

// @public
export interface LinkPressOptions {
    ignoreHashChange?: boolean;
    preventDefault?: boolean;
}

// @public
export interface LinkPressTarget {
    classAttribute: string | null;
    clickedAnchorBoundingRect: DOMRect;
    dataAttributes: DataAttributes;
    downloadAttribute: string | null;
    hrefAttribute: string;
    hreflangAttribute: string | null;
    idAttribute: string | null;
    nameAttribute: string | null;
    page: {
        origin: string | null;
        href: string;
    };
    referrerpolicyAttribute: string | null;
    relAttribute: string | null;
    scheme: string;
    targetAttribute: string | null;
    typeAttribute: string | null;
    uri: string;
}

// @public
function makeWebshell<C extends ComponentType<any>, F extends Feature<{}, {}, {}>[]>(WebView: C, ...features: F): WebshellComponent<C, F>;

export default makeWebshell;

export { makeWebshell }

// @public
export interface MinimalWebViewProps {
    // (undocumented)
    readonly contentMode?: unknown;
    // (undocumented)
    readonly disableScrollViewPanResponder?: unknown;
    // (undocumented)
    readonly injectedJavaScript?: unknown;
    // (undocumented)
    readonly javaScriptEnabled?: unknown;
    // (undocumented)
    readonly onError?: unknown;
    // (undocumented)
    readonly onMessage?: unknown;
    // (undocumented)
    readonly onNavigationStateChange?: unknown;
    // (undocumented)
    readonly scalesPageToFit?: unknown;
    // (undocumented)
    readonly showsVerticalScrollIndicator?: unknown;
    // (undocumented)
    readonly source?: Record<string, any>;
    // (undocumented)
    readonly style?: unknown;
}

// @public
export type PropDefinition<N extends string, P> = {
    eventId: string;
    type: 'handler' | 'inert';
    featureIdentifier: string;
    name: N;
    signature?: Partial<Record<N, P>>;
};

// @public (undocumented)
export type PropsSpecs<N extends string, P> = {
    [k in N]: PropDefinition<k, P>;
};

// @public
export function useAutoheight<S extends WebshellProps<MinimalWebViewProps, [ExtractFeatureFromClass<typeof HandleHTMLDimensionsFeature>]>>(params: AutoheightParams<S>): AutoheightState<S>;

// @public
export function useWebshell<C extends ComponentType<any>, F extends Feature<{}, {}, {}>[]>({ features, props: webshellProps, webViewRef }: UseWebshellParams<React_2.ComponentProps<C>, F>): React_2.ComponentProps<C> & {
    ref: ElementRef<C>;
};

// @public
export interface UseWebshellParams<W extends MinimalWebViewProps, F extends Feature<{}, {}, {}>[]> {
    features: F;
    props: WebshellProps<W, F>;
    webViewRef?: ElementRef<any>;
}

// @public
export interface VisualViewportDimensions {
    isLegacy: boolean;
    scale: number;
    visualViewport: DOMRectSize;
}

// @public
export interface WebHandle {
    postMessageToWeb<F extends Feature<any, any, any>, H extends keyof ExtractWebHandlerSpecsFromFeature<F>>(feat: F, eventId: H, payload: Required<ExtractWebHandlerSpecsFromFeature<F>[H]>['payload']): void;
}

// @public
export interface WebHandlerDefinition<I extends string, P> {
    // (undocumented)
    async: false;
    // (undocumented)
    eventId: I;
    // (undocumented)
    payload?: P;
}

// @public
export type WebHandlersSpecs<I extends string = string, P = {}> = {
    [k in I]: WebHandlerDefinition<I, P>;
};

// @public
export interface WebjsContext<O extends {}> {
    info(message: string): void;
    makeCallbackSafe<T extends Function>(callback: T): T;
    onShellMessage<P>(eventId: string, handler: (payload: P) => void): void;
    readonly options: O;
    postMessageToShell<P>(payload: P): void;
    postMessageToShell<P>(eventId: string, payload: P): void;
    utils: DOMUtils;
    warn(message: string): void;
}

// @public
export type WebshellComponent<C extends ComponentType<any>, F extends Feature<any, any, any>[]> = ForwardRefExoticComponent<WebshellProps<ComponentPropsWithoutRef<C>, F> & RefAttributes<ElementRef<C>>>;

// @public
export interface WebshellInvariantProps {
    onWebFeatureError?: (featureIdentifier: string, error: string) => void;
    webHandleRef?: Ref<WebHandle>;
    webshellDebug?: boolean;
    webshellStrictMode?: boolean;
}

// @public
export type WebshellProps<W extends MinimalWebViewProps, F extends Feature<any, any, any>[]> = WebshellInvariantProps & W & (F[number] extends never ? {} : ExtractPropsFromFeature<F[number]>);


// (No @packageDocumentation comment for this package)

```
